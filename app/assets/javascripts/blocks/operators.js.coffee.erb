# 「演算」ジャンル

<%
  prefix = 'operators'
  color = 93
%>

# 変数:(　) + (　)
# 変数:(　) - (　)
# 変数:(　) * (　)
# 変数:(　) / (　)
<%
  [
    ['add', '＋', 'ADDITIVE', '+'],
    ['minus', 'ー', 'ADDITIVE', '-'],
    ['multiply', '×', 'MULTIPLICATIVE', '*'],
    ['divide', '÷', 'MULTIPLICATIVE', '/'],
  ].each do |suffix, operator_label, order_suffix, operator|
    n = "#{prefix}_#{suffix}"
%>

Blockly.Blocks['<%= n %>'] =
  init: ()->
    @.setHelpUrl('')
    @.setColour(<%= color %>)
    @.appendValueInput('A').setCheck('Number')
    @.appendValueInput('B').setCheck('Number').appendField('<%= operator_label %>')
    @.setInputsInline(true)
    @.setOutput(true, 'Number')
    @.setTooltip('')

Blockly.Ruby['<%= n %>'] = (block) ->
  order = Blockly.Ruby.ORDER_<%= order_suffix %>
  a = Blockly.Ruby.valueToCode(block, 'A', order) || '0'
  b = Blockly.Ruby.valueToCode(block, 'B', order) || '0'
  [a + ' <%= operator %> ' + b, order]
<% end %>
